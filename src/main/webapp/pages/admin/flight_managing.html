<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<fmt:setBundle basename="lang" var="rb"/>
<html>
<head>
    <c:import url="/resources/components/dependencies.html"/>
    <title>
        <fmt:message key="route.managing" bundle="${rb}"/>
    </title>
</head>
<body>

<c:import url="/resources/components/navigation.html"/>


<c:import url="/resources/components/admin_navigation.html"/>

<c:if test="${param.invalid_path}">
    <div>
        <div class=" container alert alert-danger col-md-5 ">
            Invalid path! Please, try again
        </div>
    </div>
</c:if>
<form class="col-md-5" action="/admin/flight_managing" method="post">

    <div class="form-group">
        <label for="sel_airline">Airline:</label>

        <select name="s_airline"  class="form-control" id="sel_airline">
            <c:forEach var="airline" items="${sel_airlines}">
                <option value="${airline.companyId}">${airline.companyName}</option>
            </c:forEach>
        </select>
    </div>
    <div class="form-group">
        <label for="sel_airport_from">From:</label>

        <select name="s_airport_from"  class="form-control" id="sel_airport_from">
            <c:forEach var="airport" items="${sel_airports}">
                <option value="${airport.airportId}">${airport}</option>
            </c:forEach>
        </select>
    </div>
    <div class="form-group">
        <label for="sel_airport_to">To:</label>

        <select name="s_airport_to"  class="form-control" id="sel_airport_to">
            <c:forEach var="airport" items="${sel_airports}">
                <option value="${airport.airportId}">${airport}</option>
            </c:forEach>
        </select>
    </div>
    <div class="form-group">
        <label for="flight_time">Flight duration:</label>
        <input type="time" id="flight_time" class="form-control" name="flight_time"/>
    </div>

    <div class="form-group">
        <label for="plane">Plane:</label>
        <input type="text" id="plane" class="form-control" name="plane"/>
    </div>
    <div class="form-group">
        <label for="departure_time">Departure time:</label>
        <input type="datetime" id="departure_time" class="form-control" name="departure_time"/>
    </div>
    <div class="form-group">
        <label for="start_price">Start price:</label>
        <input type="text" id="start_price" class="form-control" name="start_price"/>
    </div>
    <div class="form-group">
        <label for="start_price_business">Start price for privilege:</label>
        <input type="text" id="start_price_business" class="form-control" name="start_price_business"/>
    </div>
    <div class="form-group">
        <label for="tickets_count">Tickets count:</label>
        <input type="text" id="tickets_count" class="form-control" name="tickets_count"/>
    </div>
    <div class="form-group">
        <input type="submit" class="btn btn-success" value="Add flight">
    </div>

</form>

<div style="margin-top:20px;" class="container col-md-offset-1 col-md-10">
    <div class="panel panel-info">
        <div class="panel-heading ">
            Routes
        </div>
        <div class="panel-body">
            <table class="table table-hover ">
                <tr>
                    <th>Airline</th>
                    <th>From</th>
                    <th>To</th>
                    <th>Flight duration</th>
                    <th>Plane</th>
                    <th>Departure time</th>
                    <th>Start price</th>
                    <th>Start price for privilege</th>
                    <th>Tickets count</th>
                    <th>Available tickets</th>
                </tr>
                <c:forEach items="${flights}" var="flight">
                    <tr>
                        <td>${flight.route.company.companyName}</td>
                        <td>${flight.route.airportFrom}</td>
                        <td>${flight.route.airportTo}</td>
                        <td>${flight.route.flightDuration}</td>
                        <td>${flight.route.plane}</td>
                        <td>${flight.departureTime}</td>
                        <td>${flight.startPrice}</td>
                        <td>${flight.startPriceForBusiness}</td>
                        <td>${flight.tickets.size()}</td>
                        <td>${availableTickets.get(flight)}</td>
                    </tr>
                </c:forEach>
            </table>

        </div>
    </div>
</div>


</body>
</html>
